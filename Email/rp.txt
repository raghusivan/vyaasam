Here’s a Python 2.7.8 script that reads from a configuration file (config.ini) to store all the paths and parameters used in the curl command. The script then executes the command using Python’s subprocess module.

config.ini file structure:

[Paths]
cert = /tmp/test1/FOR-Risk-DigitalReasoning-CyberArk-use.pem
key = /tmp/test1/private-key.key
cacert = /etc/ssl/certs/Macquarie-G1-and-legacy_SHA2_CA-Bundle.cer

[URL]
url = "https://cyberark-cpp.lb.macbank/AIMWebService/api/Accounts"
appid = AP012815-PRD
safe = CP-AP012815-SYS-PRD-INT
username = mg_commsurv_email
address = NTADMIN

Python Script: send_curl.py

import subprocess
import ConfigParser

def load_config(config_file):
    config = ConfigParser.ConfigParser()
    config.read(config_file)
    return config

def run_curl_command(config):
    cert = config.get('Paths', 'cert')
    key = config.get('Paths', 'key')
    cacert = config.get('Paths', 'cacert')
    url = config.get('URL', 'url')
    appid = config.get('URL', 'appid')
    safe = config.get('URL', 'safe')
    username = config.get('URL', 'username')
    address = config.get('URL', 'address')
    
    # Building the curl command
    curl_command = [
        "curl", "-v", "--cert-type", "pem", "--cert", cert, 
        "--key", key, "--cacert", cacert, "-X", "GET",
        "{}?AppID={}&Safe={}&UserName={}&Address={}".format(url, appid, safe, username, address)
    ]
    
    # Running the curl command
    result = subprocess.Popen(curl_command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    stdout, stderr = result.communicate()
    
    if result.returncode == 0:
        print("Curl command executed successfully:\n", stdout)
    else:
        print("Error executing curl command:\n", stderr)

if __name__ == "__main__":
    config = load_config('config.ini')
    run_curl_command(config)

Steps to Use:

1. Save the config.ini file with the appropriate paths and values.


2. Run the Python script after ensuring Python 2.7.8 is installed.



The script reads the parameters from the config.ini file and executes the curl command with them.

Let me know if you need further modifications!

